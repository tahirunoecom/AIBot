version: "3.1"

stories:

    # Note: Greeting is now handled entirely by a rule (Respond to greeting)
    # and a custom action that manages login context.  We no longer
    # include an explicit story for greeting here to avoid conflicts
    # between rules and stories.  When a user greets, the rule will
    # trigger `action_custom_greet`.  The user can then explicitly
    # ask to see categories via the `show_categories` intent.

- story: view cart and checkout
  steps:
  - intent: view_cart
  - action: action_view_cart
  - intent: checkout
  - action: action_checkout

- story: track order
  steps:
  - intent: track_order
  - action: action_track_order

- story: select product by number
  steps:
  - intent: select_product
  - action: action_select_product

- story: Initiate Stripe payment
  steps:
  - intent: pay_now
  - action: action_create_stripe_checkout

- story: Check payment status
  steps:
  - intent: check_payment_status
  - action: action_check_payment_status

- story: Full store search path
  steps:
  - intent: search_store
  - action: action_get_nearest_store
  - intent: provide_zipcode
  - action: action_get_nearest_store
  - intent: select_store
  - action: action_set_selected_store
